(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{221:function(e,t,a){"use strict";a.r(t);var s=a(0),r=a.n(s),c=a(12),n=a(14),l=a(5),o=a.n(l),i=a(66);t.default=function(e){const t=Object(s.useContext)(c.a),[a,l]=Object(n.a)({searchTerm:"",results:[],show:"neither",requestCount:0});function m(e){27==e.keyCode&&t({type:"closeSearch"})}return Object(s.useEffect)(()=>(document.addEventListener("keyup",m),()=>document.removeEventListener("keyup",m)),[]),Object(s.useEffect)(()=>{if(a.searchTerm.trim()){l(e=>{e.show="loading"});const e=setTimeout(()=>{l(e=>{e.requestCount++})},700);return()=>clearTimeout(e)}l(e=>{e.show="neither"})},[a.searchTerm]),Object(s.useEffect)(()=>{if(a.requestCount){const e=o.a.CancelToken.source();return async function(){try{const t=await o.a.post("/search",{searchTerm:a.searchTerm},{cancelToken:e.token});l(e=>{e.results=t.data,e.show="results"})}catch(e){console.log("There was a problem")}}(),()=>e.cancel()}},[a.requestCount]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"search-overlay-top shadow-sm"},r.a.createElement("div",{className:"container container--narrow"},r.a.createElement("label",{htmlFor:"live-search-field",className:"search-overlay-icon"},r.a.createElement("i",{className:"fas fa-search"})),r.a.createElement("input",{autoFocus:!0,type:"text",autoComplete:"off",id:"live-search-field",className:"live-search-field",placeholder:"What are you interested in?",onChange:function(e){const t=e.target.value;l(e=>{e.searchTerm=t})}}),r.a.createElement("span",{onClick:()=>t({type:"closeSearch"}),className:"close-live-search"},r.a.createElement("i",{className:"fas fa-times-circle"})))),r.a.createElement("div",{className:"search-overlay-bottom"},r.a.createElement("div",{className:"container container--narrow py-3"},r.a.createElement("div",{className:"circle-loader "+("loading"==a.show?"circle-loader--visible":"")}),r.a.createElement("div",{className:"live-search-results "+("results"==a.show?"live-search-results--visible":"")},Boolean(a.results.length)?r.a.createElement("div",{className:"list-group shadow-sm"},r.a.createElement("div",{className:"list-group-item active"},r.a.createElement("strong",null,"Search Results")," (",a.results.length," ",a.results.length>1?"items":"item"," ","found)"),a.results.map(e=>r.a.createElement(i.a,{post:e,key:e._id,onClick:()=>t({type:"closeSearch"})}))):r.a.createElement("p",{className:"alert alert-danger text-center shadow-sm"},"Sorry, we could not find any results for this search")))))}},66:function(e,t,a){"use strict";var s=a(0),r=a.n(s),c=a(9);t.a=function(e){const t=e.post,a=new Date(t.createdDate),s=`${a.getDate()}/${a.getMonth()+1}/${a.getFullYear()}`;return r.a.createElement(c.b,{onClick:e.onClick,to:"/post/"+t._id,className:"list-group-item list-group-item-action"},r.a.createElement("img",{className:"avatar-tiny",src:t.author.avatar})," ",r.a.createElement("strong",null,t.title)," ",r.a.createElement("span",{className:"text-muted small"},e.noAuthor?"":"by "+t.author.username," on ",s))}}}]);