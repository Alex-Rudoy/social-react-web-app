(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{212:function(e,a){},222:function(e,a,t){"use strict";t.r(a);var s=t(0),c=t.n(s),r=t(11),n=t(12),l=t(14),m=t(185),i=t.n(m),u=t(9);a.default=function(e){const a=Object(s.useRef)(null),t=Object(s.useContext)(r.a),m=Object(s.useContext)(n.a),o=Object(s.useRef)(null),h=Object(s.useRef)(null),[f,p]=Object(l.a)({fieldValue:"",chatMessages:[]});return Object(s.useEffect)(()=>{t.isChatOpen&&(o.current.focus(),m({type:"clearUnreadChatCount"}))},[t.isChatOpen]),Object(s.useEffect)(()=>(a.current=i()("http://localhost:8080"),a.current.on("chatFromServer",e=>{p(a=>{a.chatMessages.push(e)})}),()=>a.current.disconnect()),[]),Object(s.useEffect)(()=>{h.current.scrollTop=h.current.scrollHeight,f.chatMessages.length&&!t.isChatOpen&&m({type:"incrementUnreadChatCount"})},[f.chatMessages]),c.a.createElement("div",{id:"chat-wrapper",className:"chat-wrapper shadow border-top border-left border-right "+(t.isChatOpen?"chat-wrapper--is-visible":"")},c.a.createElement("div",{className:"chat-title-bar bg-primary"},"Chat",c.a.createElement("span",{className:"chat-title-bar-close",onClick:()=>{m({type:"closeChat"})}},c.a.createElement("i",{className:"fas fa-times-circle"}))),c.a.createElement("div",{id:"chat",className:"chat-log",ref:h},f.chatMessages.map((e,a)=>e.username==t.user.username?c.a.createElement("div",{className:"chat-self",key:a},c.a.createElement("div",{className:"chat-message"},c.a.createElement("div",{className:"chat-message-inner"},e.message)),c.a.createElement("img",{className:"chat-avatar avatar-tiny",src:e.avatar})):c.a.createElement("div",{className:"chat-other",key:a},c.a.createElement(u.b,{to:"/profile/"+e.username},c.a.createElement("img",{className:"avatar-tiny",src:e.avatar})),c.a.createElement("div",{className:"chat-message"},c.a.createElement("div",{className:"chat-message-inner"},c.a.createElement(u.b,{to:"/profile/"+e.username},c.a.createElement("strong",null,e.username,": ")),e.message))))),c.a.createElement("form",{id:"chatForm",className:"chat-form border-top",onSubmit:function(e){e.preventDefault(),a.current.emit("chatFromBrowser",{message:f.fieldValue,token:t.user.token}),p(e=>{e.chatMessages.push({message:e.fieldValue,username:t.user.username,avatar:t.user.avatar}),e.fieldValue=""})}},c.a.createElement("input",{ref:o,type:"text",className:"chat-field",id:"chatField",placeholder:"Type a messageâ€¦",autoComplete:"off",value:f.fieldValue,onChange:function(e){const a=e.target.value;p(e=>{e.fieldValue=a})}})))}}}]);