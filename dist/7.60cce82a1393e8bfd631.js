(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{224:function(e,a,t){"use strict";t.r(a);var o=t(0),n=t.n(o),l=t(19),r=t(2),s=t(9),c=t(5),i=t.n(c),u=t(11),f=t(20),m=t(66);var p=function(e){const[a,t]=Object(o.useState)(!0),[l,s]=Object(o.useState)([]),{username:c}=Object(r.f)(),p=Object(o.useContext)(u.a);return Object(o.useEffect)(()=>{const e=i.a.CancelToken.source();return async function(){try{const a=await i.a.get(`/profile/${c}/posts`,{cancelToken:e.token});s(a.data),t(!1),console.log(a.data)}catch(e){console.log("There was a problem")}}(),()=>{e.cancel()}},[c]),a?n.a.createElement(f.a,null):0==l.length?n.a.createElement("p",null,p.user.username==e.profile?"You have":"This user has"," no posts yet"):n.a.createElement("div",{className:"list-group"},l.map(e=>n.a.createElement(m.a,{noAuthor:!0,post:e,key:e._id})))},w=t(14);const g=n.a.lazy(()=>t.e(12).then(t.bind(null,223)));a.default=function(e){const{username:a}=Object(r.f)(),t=Object(o.useContext)(u.a),[c,m]=Object(w.a)({followActionLoading:!1,startFollowingRequestCount:0,stopFollowingRequestCount:0,profileData:{profileUsername:"...",profileAvatar:"https://gravatar.com/avatar/placeholder?s=128",isFollowing:!1,counts:{postCount:"",followerCount:"",followingCount:""}}});//! page loader
return Object(o.useEffect)(()=>{const e=i.a.CancelToken.source();return async function(){try{const o=await i.a.post("/profile/"+a,{token:t.user.token},{cancelToken:e.token});m(e=>{e.profileData=o.data})}catch(e){console.log("There was a problem")}}(),()=>{e.cancel()}},[a]),Object(o.useEffect)(()=>{if(c.startFollowingRequestCount){m(e=>{e.followActionLoading=!0});const e=i.a.CancelToken.source();return async function(){try{await i.a.post("/addFollow/"+c.profileData.profileUsername,{token:t.user.token},{cancelToken:e.token});m(e=>{e.profileData.isFollowing=!0,e.profileData.counts.followerCount++,e.followActionLoading=!1})}catch(e){console.log("There was a problem"),draft.followActionLoading=!1}}(),()=>{e.cancel()}}},[c.startFollowingRequestCount]),Object(o.useEffect)(()=>{if(c.stopFollowingRequestCount){m(e=>{e.followActionLoading=!0});const e=i.a.CancelToken.source();return async function(){try{await i.a.post("/removeFollow/"+c.profileData.profileUsername,{token:t.user.token},{cancelToken:e.token});m(e=>{e.profileData.isFollowing=!1,e.profileData.counts.followerCount--,e.followActionLoading=!1})}catch(e){console.log("There was a problem"),draft.followActionLoading=!1}}(),()=>{e.cancel()}}},[c.stopFollowingRequestCount]),n.a.createElement(l.a,{title:t.user.username+"'s profile"},n.a.createElement("h2",null,n.a.createElement("img",{className:"avatar-small",src:c.profileData.profileAvatar})," ",c.profileData.profileUsername,t.loggedIn&&t.user.username!=c.profileData.profileUsername&&"..."!=c.profileData.profileUsername?c.profileData.isFollowing?n.a.createElement("button",{onClick://! unfollow functionality
function(){m(e=>{e.stopFollowingRequestCount++})},disabled:c.followActionLoading,className:"btn btn-danger btn-sm ml-2"},"Unfollow ",n.a.createElement("i",{className:"fas fa-user-times"})):n.a.createElement("button",{onClick://!follow functionality
function(){m(e=>{e.startFollowingRequestCount++})},disabled:c.followActionLoading,className:"btn btn-primary btn-sm ml-2"},"Follow ",n.a.createElement("i",{className:"fas fa-user-plus"})):""),n.a.createElement("div",{className:"profile-nav nav nav-tabs pt-2 mb-4"},n.a.createElement(s.c,{to:"/profile/"+c.profileData.profileUsername,exact:!0,className:"nav-item nav-link"},"Posts: ",c.profileData.counts.postCount),n.a.createElement(s.c,{to:`/profile/${c.profileData.profileUsername}/followers`,className:"nav-item nav-link"},"Followers: ",c.profileData.counts.followerCount),n.a.createElement(s.c,{to:`/profile/${c.profileData.profileUsername}/following`,className:"nav-item nav-link"},"Following: ",c.profileData.counts.followingCount)),n.a.createElement(o.Suspense,{fallback:n.a.createElement(f.a,null)},n.a.createElement(r.c,null,n.a.createElement(r.a,{path:"/profile/:username",exact:!0},n.a.createElement(p,null)),n.a.createElement(r.a,{path:"/profile/:username/followers"},n.a.createElement(g,{action:"followers",profile:c.profileData.profileUsername})),n.a.createElement(r.a,{path:"/profile/:username/following"},n.a.createElement(g,{action:"following",profile:c.profileData.profileUsername})))))}},66:function(e,a,t){"use strict";var o=t(0),n=t.n(o),l=t(9);a.a=function(e){const a=e.post,t=new Date(a.createdDate),o=`${t.getDate()}/${t.getMonth()+1}/${t.getFullYear()}`;return n.a.createElement(l.b,{onClick:e.onClick,to:"/post/"+a._id,className:"list-group-item list-group-item-action"},n.a.createElement("img",{className:"avatar-tiny",src:a.author.avatar})," ",n.a.createElement("strong",null,a.title)," ",n.a.createElement("span",{className:"text-muted small"},e.noAuthor?"":"by "+a.author.username," on ",o))}}}]);